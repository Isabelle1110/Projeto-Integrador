<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-width, initial-scale=1.0">
    <title>Solicitar Or√ßamento</title>
    <link rel="stylesheet" href="orcamento.css">
</head>
<body>
    
    <div class="modal-backdrop">
        <div class="orcamento-container">
            <header class="orcamento-header">
                <h1 class="titulo-orcamento">SOLICITAR<br>OR√áAMENTO</h1>
                <span class="close-button" onclick="fecharModal()">X</span>
            </header>

            <form id="formOrcamento" class="formulario">
                
                <div class="linha-campos">
                    <div class="campo-rotulo">
                        <label for="nome">Nome:</label>
                        <input type="text" id="nome" name="nome" placeholder="nome completo" required />
                    </div>
                    <div class="campo-rotulo">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" placeholder="nome@gmail.com" required />
                    </div>
                </div>

                <div class="linha-campos">
                    <div class="tipo-evento-group">
                        <label>Tipo de evento:</label>
                        <div class="radio-opcoes">
                            <label><input type="radio" name="tipoEvento" value="Cerimonial" required> Cerimonial</label>
                            <label><input type="radio" name="tipoEvento" value="Congressos e Confer√™ncias"> Congressos e Confer√™ncias</label>
                            <label><input type="radio" name="tipoEvento" value="Workshops Empresariais"> Workshops Empresariais</label>
                            <label><input type="radio" name="tipoEvento" value="Lan√ßamento de Produto"> Lan√ßamento de Produto</label>
                            <label><input type="radio" name="tipoEvento" value="Outro"> Outro ..................</label>
                        </div>
                    </div>

                    <div class="campos-direita">
                        
                        <div class="campo-rotulo">
                            <label for="dataEvento">Data:</label>
                            <input type="date" id="dataEvento" name="dataEvento" required /> 
                        </div>
                        
                        <div class="campo-rotulo">
                            <label for="celular">Celular:</label>
                            <input 
                                type="tel" 
                                id="celular" 
                                name="celular" 
                                placeholder="(99) 99999-9999" 
                                required 
                                maxlength="15" 
                                onkeypress="return event.charCode >= 48 && event.charCode <= 57" />
                        </div>
                        
                        <div class="campo-rotulo comentario-group">
                            <label for="comentario">Coment√°rio:</label>
                            <textarea id="comentario" name="comentario"></textarea>
                        </div>
                    </div>
                </div>

                <div class="botoes-duplos">
                    <button type="button" class="botao-cadastrar" onclick="window.location.href='cadastro.html'">Cadastrar</button> 
                    
                    <button type="submit" class="botao-enviar">Enviar</button>
                </div>

            </form>
        </div>
    </div>

    <script>
        const NUMERO_LUCIANO = '556194126644'; 

        function fecharModal() {
             console.log("Fechando modal...");
        }

        function formatarCelular(input) {
            let value = input.value.replace(/\D/g, ""); 
            value = value.substring(0, 11);
            let formattedValue = '';
            if (value.length > 0) {
                formattedValue += '(' + value.substring(0, 2);
            }
            if (value.length > 2) {
                formattedValue += ') ' + value.substring(2, 7);
            }
            if (value.length > 7) {
                formattedValue += '-' + value.substring(7, 11);
            }
            input.value = formattedValue;
        }

        document.getElementById('celular').addEventListener('input', function() {
            formatarCelular(this);
        });

        document.getElementById('formOrcamento').addEventListener('submit', function(event) {
            event.preventDefault();

            const celularInput = document.getElementById('celular');
            const celularLimpo = celularInput.value.replace(/\D/g, "");
            if (celularLimpo.length < 10 || celularLimpo.length > 11) { 
                alert("Por favor, preencha o campo Celular com um DDD e n√∫mero v√°lidos (10 ou 11 d√≠gitos).");
                celularInput.focus();
                return;
            }

            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const dataEvento = document.getElementById('dataEvento').value;
            const comentario = document.getElementById('comentario').value;
            const tipoEventoElement = document.querySelector('input[name="tipoEvento"]:checked');
            const tipoEvento = tipoEventoElement ? tipoEventoElement.value : 'N√£o informado';

            let mensagem = `*üö® NOVA SOLICITA√á√ÉO DE OR√áAMENTO (via Website) üö®*%0A%0A`;
            mensagem += `Prezado Luciano,%0A`;
            mensagem += `Recebemos uma nova solicita√ß√£o de or√ßamento com os seguintes detalhes:%0A%0A`;
            mensagem += `*DADOS DO CLIENTE*%0A`;
            mensagem += `---------------------------------%0A`;
            mensagem += `*Nome:* ${nome}%0A`;
            mensagem += `*Email:* ${email}%0A`;
            mensagem += `*Celular:* ${celularInput.value}%0A%0A`;
            mensagem += `*DETALHES DO EVENTO*%0A`;
            mensagem += `---------------------------------%0A`;
            mensagem += `*Tipo de Evento:* ${tipoEvento}%0A`;
            mensagem += `*Data Sugerida:* ${dataEvento}%0A`;
            mensagem += `*Coment√°rio/Necessidades Adicionais:* ${comentario || 'N/A'}%0A%0A`;
            mensagem += `Aguardamos o seu contato para darmos continuidade ao processo.%0A`;
            mensagem += `Att.,%0AEquipe do Site`;

            const linkWhatsApp = `https://wa.me/${NUMERO_LUCIANO}?text=${mensagem}`;
            window.open(linkWhatsApp, '_blank');
            alert("A solicita√ß√£o de or√ßamento ser√° aberta no WhatsApp do Luciano. Por favor, confirme o envio.");
            this.reset();
        });
    </script>
</body>
</html>
